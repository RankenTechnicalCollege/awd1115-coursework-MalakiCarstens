@model FandomFinds.Models.ProductViewModel

@{
    Layout = "_AdminLayout";
    ViewBag.Title = "Admin Product List";
}
<h1>Welcome to Admin Product List</h1>

@* <div class="row">
    <div class="col-md-2">
        <ul class="list-group">
            <li class="list-group-item">
                <a asp-area="Admin" asp-controller="Product" asp-action="List" asp-route-name="sh figuarts" class="nav-link">S.H. Figuarts</a>

            </li>
            <li class="list-group-item">
                <a asp-area="Admin" asp-controller="Product" asp-action="List" asp-route-name="funko" class="nav-link">Funko</a>
            </li>
            <li class="list-group-item">
                <a asp-area="Admin" asp-controller="Product" asp-action="List" asp-route-name="nintendo" class="nav-link">Nintendo</a>
            </li>
        </ul>
    </div> *@

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-secondary">
            @TempData["SuccessMessage"]
        </div>
    }


    <div class="col-md-10">
        <table class="table table-striped table-info">
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Price</th>
                <th>Brand</th>
                <th></th>
                <th></th>
            </tr>

            @foreach (var item in Model.Products)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.Name)</td>
                    <td>@Html.DisplayFor(modelItem => item.Description)</td>
                    <td>@Html.DisplayFor(modelItem => item.Price)</td>
                    <td>@Html.DisplayFor(modelItem => item.Brand)</td>

                    <td>
                        <a asp-area="Admin" asp-controller="Product" asp-action="AddEdit" asp-route-id=@item.ProductId class="btn btn-primary">Edit</a>

                    </td>
                    <td>
                    <form asp-area="Admin" asp-controller="Product" asp-action="DeleteConfirmed" asp-route-id="@item.ProductId" method="post" class="d-inline">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                    </td>

                </tr>
            }



        </table>
        <a asp-area="Admin" asp-controller="Product" asp-action="AddEdit" class="btn btn-primary">Add New Product</a>
    </div>

    <h3>Brands</h3>
    <ul>
        @foreach (var brand in Model.Brands)
        {
            <li>@brand.Name</li>
        }
    </ul>

    <h3>Product Reviews</h3>
    <table class="table table-bordered">
        <tr>
            <th>Product</th>
            <th>Reviewer</th>
            <th>Review</th>
            <th>Rating</th>
        </tr>
        @foreach (var review in Model.Reviews)
        {
            <tr>
                <td>
                    @{
                        var product = Model.Products.FirstOrDefault(p => p.ProductId == review.ProductId);
                        if (product != null)
                        {
                            @product.Name
                        }
                      
                    }
                </td>
                <td>@review.ReviewerName</td>
                <td>@review.ReviewText</td>
                <td>@review.Rating / 5</td>
            </tr>
        }
    </table>





</div>